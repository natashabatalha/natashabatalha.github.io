<!DOCTYPE HTML>
<!--
	Massively by Pixelarity
	pixelarity.com | hello@pixelarity.com
	License: pixelarity.com/license
-->
<html>
	<head>
		<title>MAESTRO | Code Standars</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="Stylesheets/main.css" />
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo">MAESTRO</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li class="active"><a href="index.html#header">Project Updates</a></li>
							<li><a href="timeline.html">Timeline</a></li>
							<li><a href="generic.html">Tasks & Team</a></li>
							<li><a href="elements.html">Future Mtg Topics</a></li>
						</ul>
						<ul class="icons">
							<li><a href="https://github.com/exoarc" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">

									<h2 id="exopag2019">Coding Standards</h2>
									<p>Outlines coding standards for contributing 
									to MAESTRO</p>
								</header>
								<h3>PEP 8 Style Guide</h3>
								We follow PEP 8 styling. However, we generally aren't too picky. Below we emphasize the "must haves" of our code. 
								<a href="https://www.python.org/dev/peps/pep-0008/#descriptive-naming-styles">PEP 8</a>
								<h3>Comments & Docstrings</h3>
									<ul>
										<li>
											Your code should read like a book. If 
										you have ~10 lines of code without a comment you are commenting too infrequently.</li>
										<li>
											It is really important to style function headers uniformly using <a href="https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_numpy.html#example-numpy"> NumPy style Python Docstrings</a>. This enables <a href="http://www.sphinx-doc.org/en/master/">sphinx</a> to auto read function headers. Below is an example, but <a href="https://numpydoc.readthedocs.io/en/latest/format.html#sections">look here </a>for a full list of headers.
										</li>
									</ul>								
								<pre>
									<code>
def foo(in1, in2,in3=None):
    """
    Describe function thoroughly. 

    Add any relevant citations. 

    Parameters
    ----------
    in1 : int 
        This variable is for something cool.
    in2 : list of float
        This variable is for something else cool.
    in3 : str,optional
        (Optional) Default=None, this variable is options.

    Returns
    -------
    int
        Cool output
    float 
    	Other cool output

    Examples
    --------
    This is how to use this. 

    >>a = foo(5,[5.0,4.0],in3='hello')


    Warnings
    --------
    Garbage in garbage out
    """
									</code>
								</pre>
									<ul>
										<li>
											Variable names should explain what the variable is. Avoid undescriptive names like <code>thing1</code> or <code>thing2</code>
										</li>
										<li>
											If you have an equation in your code it should be referenced with a paper and equation number. For example:
										</li>
									</ul>
<pre>
	<code>
#now define terms of Toon et al 1989 quadrature Table 1 
#https://agupubs.onlinelibrary.wiley.com/doi/pdf/10.1029/JD094iD13p16287
#see table of terms 
sq3 = sqrt(3.)
g1	= (sq3*0.5)*(2. - w0*(1.+cosbar))	#table 1
g2	= (sq3*w0*0.5)*(1.-cosbar)		   #table 1
g3	= 0.5*(1.-sq3*cosbar*ubar0)		  #table 1
lamda = sqrt(g1**2 - g2**2)					 #eqn 21
gama  = (g1-lamda)/g2							  #eqn 22
	</code>
</pre>


<h3>Github Workflow</h3>
<h4>1) Clone the repository</h4>
<p>Clond the repository that you are interested in working on.</p>
<pre>
<code>
git clone https://github.com/natashabatalha/picaso.git
</code>
</pre>
<p>This will download a copy of the code to your computer. You will automatically be in the <code>master</code> branch upon downloading. </p>

<h4> ** Side note: Important distinction between <code>master</code> and <code>dev</code> ** </h4>

<p><code>master</code> always represents the released production code. Here is the workflow we will follow. All major development will be done on branches off of <code>dev</code>. The only exceptions are what we call "hotfixes", which can go directly from the fixed branch to master, and minor bugs that can be directly fixed on <code>dev</code>. See the overall schematic below. </p>
<img src="Images/github_flow.jpg" width=700>
<h4>2) Create a branch off of <code>dev</code> with a useful name</h4>
<p>It's likely you will be working on a specific subset of a bigger code project. Any changes you make on a new branch will not affect <code>master</code> or <code>dev</code>, so you can feel free to beat up the code without damaging anything that is fully tested.</p>
<pre>
<code>
git checkout -b myfeature dev
</code>
</pre>
<h4>2) Work work work work...</h4>
<p>Let's pretend that <code>myfeature</code> entails working on <code>file1.py</code> and <code>file2.py</code>. After you are happy with an initial change, commit and push your changes.
</p>
<pre>
<code>
#commit changes
git add file1.py file2.py
git commit -m 'added cool thing'

#switch to dev branch
git checkout dev 

#merge your changes
git merge --no-ff myfeature

#delete old branch
git branch -d myfeature 

#push to dev
git push origin dev
</code>
</pre>
<p>Many people ask: "How often should I commit??". Choose something that works for you and stick to it. I try and work on smaller, individual tasks and commit when I feel I have finished something. If you try and do too much at once, your commit comments won't make too much sense with what you have actually done. Remember, eventually someone will have to review your commits. If they are hard to parse, it will delay the merge of your work.
</p>
<h4>3) Final merge to <code>master</code> </h4>
<p>
<code>master</code> is generally a protected branch, so talk to the admin or the team before proceeding. In general, merges to master are easiest done through <a href="https://github.com/">Github Online</a>. Near where the branches are listed, go to "New Pull Request". Write a description of the new dev capability, and request a merge to master. And if all good then, done!!! 
</p>

<!-- https://nvie.com/posts/a-successful-git-branching-model/ -->
<h3>An Aside About Conda Enviornment</h3>
<p>Package control and version control is a pain. To make sure everyone is running on the same enviornment it will be beneficial if we are all work in the same environment. Here are the most pertinent commands you need to know. </p>
<h4>Create your own environment</h4>
<p>To create your own environment with a specific name and python package:</p>
<pre>
<code>
conda create --name your_env_name python=3.7 -y
</code>
</pre>
If you have specific environment variables that need to be tied to here: 
<pre>
<code>
conda activate your_env_name
cd $CONDA_PREFIX
mkdir -p ./etc/conda/activate.d
mkdir -p ./etc/conda/deactivate.d
touch ./etc/conda/activate.d/env_vars.sh
touch ./etc/conda/deactivate.d/env_vars.sh
</code>
</pre>
Edit <code>./etc/conda/activate.d/env_vars.sh</code> : 
<pre>
<code>
#!/bin/sh

export MY_VAR='path/to/something'
</code>
</pre>
And edit <code>./etc/conda/deactivate.d/env_vars.sh</code> : 
<pre>
<code>
#!/bin/sh

unset MY_VAR
</code>
</pre>
<h4>Export your environment</h4>
<p> Another great aspect of conda enviornments is that they can be passed to one another. </p>
<pre>
<code>
conda env export > my_environment.yml
</code>
</pre>
<h4>Create enviornment from <code>my_environment.yml</code></h4>
<p>And if someone passes you an environment file, you can easily replicate it ! </p>
<pre>
<code>
conda env create -f environment.yml
</code>
</pre>
							</section>
					</div>

				<!-- Footer -->
					<footer id="footer">
						<section>
						</section>
					</footer>

				<!-- Copyright -->
					<div id="copyright">
						<ul><li>MAESTRO</li></li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="Scripts/jquery.min.js"></script>
			<script src="Scripts/jquery.scrollex.min.js"></script>
			<script src="Scripts/jquery.scrolly.min.js"></script>
			<script src="Scripts/browser.min.js"></script>
			<script src="Scripts/breakpoints.min.js"></script>
			<script src="Scripts/util.js"></script>
			<script src="Scripts/main.js"></script>

	</body>
</html>